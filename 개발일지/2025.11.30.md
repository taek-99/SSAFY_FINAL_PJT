# 개발 일지 3차

## 전날 완료 사항
- 네이버 지도 API 연결 후 현재 위치입력(로컬만 현재 가능)
- 로그아웃 가능
- 로그인&로그아웃시 access token을 활용하여 구분


## Today 진행 예정 (2hr)
- 가비아를 통해 EC2 서버에 도메인 연결
- 443 포트(HTTPS) 적용
- 도메인 연결 후 서비스 접근 테스트

## 학습 내용
1. 가비아 DNS 설정 완료
- smart-er-match.shop 도메인 구매 후
- 가비아 DNS 레코드에 A 레코드 2개 추가
- @ → 13.209.99.166
- www → 13.209.99.166
- DNS 전파 시작 및 정상 반영 확인

2. Nginx 도메인 서버 설정 완료
- /etc/nginx/sites-available/default 파일 내
- server_name smart-er-match.shop www.smart-er-match.shop; 추가
- 문법 체크 (nginx -t) 및 서비스 재시작 완료

3. HTTPS(443포트) 활성화
- certbot 설치 (certbot + python3-certbot-nginx)
- Let’s Encrypt 인증서 발급 성공
- /etc/letsencrypt/live/smart-er-match.shop/ 경로에 인증서 저장됨
- certbot이 자동으로 nginx에 SSL 설정 배치
- 80 → 443 리다이렉트 자동 활성화

4. 도메인 HTTPS 접속 테스트 성공
- https://smart-er-match.shop 접속 정상
- https://www.smart-er-match.shop 접속 정상
- SSL 정상 적용 확인
(브라우저에서 보안 자물쇠 아이콘 표시)

5. nginx 수정 방법
- sudo chmod 777 /etc/nginx/sites-available/default
- nano /etc/nginx/sites-available/default
- sudo chmod 644 /etc/nginx/sites-available/default
- sudo chown root:root /etc/nginx/sites-available/default

6. 네이버 지도 불러오는 방법
- 브라우저 → 다른 도메인(네이버, 카카오 등) REST API 직접 호출
    - 거의 항상 CORS 이슈 난다
    - 키/시크릿도 그대로 노출
- 브라우저 → 내 서버(EC2, 백엔드, Nginx) → 외부 API
    - CORS 걱정 거의 X (같은 Origin)
    - 키/시크릿은 서버에만 숨길 수 있음

## 완료된것
- 도메인 연결 완료

## 실패한것 + 이유
- 도메인 연결상태에서 카카오로그인, 네이버 로그인, 네이버 지도 주소 변환 완됨
    - 원인
        - 카카오&네이버 로그인
            - 해당 사이트 api에 도메인 주소만 새로 추가하면 해결 될 예정
        - 네이버 지도 주소 변환
            - 네이버 지도 주소 받아오는건된
            - 주소 Reverse Geocoding시만 안됨
            - nginx 설정 추가로 뭔가 해야될듯
    - 밤에 다시 진행해서 해결 완료

## 내일 할거
- 지도에 검색 기능 추가
- 카카오 로그인/네이버 로그인 수정